---
import { SITE_NAME, ROUTES } from '../../config/constants';

const baseUrl = import.meta.env.BASE_URL;

function makeHref(path: string): string {
  return `${baseUrl}${path}`.replace(/\/+/g, '/');
}
---

<header class="app-header" transition:animate="fade">
  <nav class="app-header-inner">
    <a href={makeHref(ROUTES.HOME)} class="app-header-home" aria-label="Back to home">
      <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-4 0a1 1 0 01-1-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 01-1 1h-2z"
        ></path>
      </svg>
    </a>

    <a href={makeHref(ROUTES.APP)} class="app-header-logo">
      <span class="app-header-dot"></span>
      {SITE_NAME.toLowerCase()}
    </a>

    <!-- Spacer to keep logo centered -->
    <div class="app-header-spacer"></div>
  </nav>
</header>

<style>
  .app-header {
    position: sticky;
    top: 0;
    z-index: 100;
    background: rgba(248, 247, 255, 0.85);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border-bottom: 1px solid var(--sp-border-light);
  }

  .app-header-inner {
    max-width: 1400px;
    margin: 0 auto;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.6rem 2rem;
  }

  .app-header-home {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2rem;
    height: 2rem;
    color: var(--sp-text-muted);
    border-radius: var(--sp-radius-full);
    transition: all 0.2s;
    text-decoration: none;
  }

  .app-header-home:hover {
    color: var(--sp-text);
    background: var(--sp-border-light);
  }

  .app-header-logo {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-family: var(--sp-font-display);
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--sp-text);
    text-decoration: none;
    transition: opacity 0.2s;
  }

  .app-header-logo:hover {
    opacity: 0.7;
  }

  .app-header-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: var(--sp-coral);
    flex-shrink: 0;
  }

  /* Matches the home button width to keep logo centered */
  .app-header-spacer {
    width: 2rem;
  }
</style>
