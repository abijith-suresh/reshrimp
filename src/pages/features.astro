---
import Layout from '../layouts/Layout.astro';
import Header from '../components/shared/Header.astro';
import Footer from '../components/shared/Footer.astro';
import FloatingShapes from '../components/shared/FloatingShapes.astro';
import { ROUTES } from '../config/constants';

const baseUrl = import.meta.env.BASE_URL;
function makeHref(path: string): string {
  return `${baseUrl}${path}`.replace(/\/+/g, '/');
}

const features = [
  {
    emoji: '&#9986;',
    title: 'Resize with precision',
    color: 'coral',
    description:
      'Scale images to exact pixel dimensions with intelligent aspect ratio lock. Perfect for social media thumbnails, website banners, or print-ready exports. Set width, height, or both — the calculator handles the math.',
  },
  {
    emoji: '&#128260;',
    title: 'Convert between formats',
    color: 'mint',
    description:
      'Switch between JPEG, PNG, and WebP with a single click. Browser-native encoding means zero quality loss during conversion. Choose the right format for your use case — WebP for web, PNG for transparency, JPEG for photos.',
  },
  {
    emoji: '&#128200;',
    title: 'Smart compression',
    color: 'lavender',
    description:
      'Fine-tune quality from 0 to 100% with a live slider. Watch file sizes shrink in real-time with side-by-side before/after preview. Find the sweet spot between quality and file size for your needs.',
  },
  {
    emoji: '&#128274;',
    title: 'Complete privacy',
    color: 'yellow',
    description:
      'Every pixel is processed locally using the Canvas API. No servers, no uploads, no tracking, no cookies, no accounts. Your images never leave your device. Verify it yourself — the source code is open.',
  },
  {
    emoji: '&#128268;',
    title: 'Works offline',
    color: 'coral',
    description:
      'After the first load, Reshrimp works entirely without an internet connection. Process sensitive images on an air-gapped machine if you need to. No network requests, ever.',
  },
  {
    emoji: '&#128736;',
    title: 'Open source',
    color: 'mint',
    description:
      'Built with Astro and TypeScript, licensed under MIT. Read the code, fork it, improve it, self-host it. Contributions are welcome — check the GitHub repository for open issues.',
  },
];
---

<Layout
  title="Reshrimp — Features"
  description="Resize, convert, compress, and process images privately in your browser. Explore all features of Reshrimp."
>
  <div class="page-pop">
    <FloatingShapes />
    <Header currentPath="/features" />

    <main transition:animate="fade">
      <!-- Hero -->
      <section class="features-hero">
        <div class="features-hero-container">
          <span class="pop-chip pop-chip-lavender">Features</span>
          <h1 class="features-hero-title">
            Everything you need.<br />
            <span class="features-hero-highlight">Nothing you don't.</span>
          </h1>
          <p class="features-hero-sub">
            Reshrimp packs powerful image processing into a clean, private, browser-based tool. No
            bloat, no accounts, no nonsense.
          </p>
        </div>
      </section>

      <!-- Feature sections -->
      <section class="features-list">
        <div class="features-list-container">
          {
            features.map((feature, i) => (
              <div class:list={['feature-row', { 'feature-row-reverse': i % 2 === 1 }]}>
                <div class={`feature-icon-box feature-icon-${feature.color}`}>
                  <span class="feature-icon-emoji" set:html={feature.emoji} />
                </div>
                <div class="feature-text">
                  <h2 class="feature-title">{feature.title}</h2>
                  <p class="feature-desc">{feature.description}</p>
                </div>
              </div>
            ))
          }
        </div>
      </section>

      <!-- CTA -->
      <section class="features-cta">
        <div class="features-cta-container">
          <h2 class="features-cta-title">Ready to try it?</h2>
          <p class="features-cta-desc">
            Free, open source, completely private. No sign-up required.
          </p>
          <a href={makeHref(ROUTES.APP)} class="cta-pop cta-pop-lg">
            Open Reshrimp
            <svg
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="cta-pop-arrow"
            >
              <line x1="5" y1="12" x2="19" y2="12"></line>
              <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
          </a>
        </div>
      </section>
    </main>

    <Footer />
  </div>
</Layout>

<style>
  .page-pop {
    position: relative;
    overflow-x: hidden;
    min-height: 100vh;
  }

  .features-hero {
    padding: 5rem 2rem 3rem;
    text-align: center;
    position: relative;
    z-index: 1;
  }

  .features-hero-container {
    max-width: 650px;
    margin: 0 auto;
  }

  .features-hero-title {
    font-family: var(--sp-font-display);
    font-size: clamp(2rem, 5vw, 3rem);
    font-weight: 800;
    line-height: 1.15;
    margin: 1rem 0 1.25rem;
    letter-spacing: -0.03em;
  }

  .features-hero-highlight {
    background: linear-gradient(135deg, var(--sp-coral), var(--sp-lavender-dark));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .features-hero-sub {
    font-size: 1.05rem;
    color: var(--sp-text-muted);
    line-height: 1.7;
    margin: 0;
  }

  .features-list {
    padding: 2rem 2rem 4rem;
    position: relative;
    z-index: 1;
  }

  .features-list-container {
    max-width: 900px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: 3rem;
  }

  .feature-row {
    display: flex;
    align-items: center;
    gap: 2.5rem;
  }

  .feature-row-reverse {
    flex-direction: row-reverse;
  }

  .feature-icon-box {
    flex-shrink: 0;
    width: 120px;
    height: 120px;
    border-radius: var(--sp-radius-xl);
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: var(--sp-shadow);
  }

  .feature-icon-coral {
    background: var(--sp-coral-light);
  }

  .feature-icon-mint {
    background: var(--sp-mint-light);
  }

  .feature-icon-lavender {
    background: var(--sp-lavender-light);
  }

  .feature-icon-yellow {
    background: var(--sp-yellow-light);
  }

  .feature-icon-emoji {
    font-size: 2.5rem;
  }

  .feature-text {
    flex: 1;
  }

  .feature-title {
    font-family: var(--sp-font-display);
    font-size: 1.35rem;
    font-weight: 700;
    margin: 0 0 0.5rem;
    letter-spacing: -0.01em;
  }

  .feature-desc {
    font-size: 0.95rem;
    color: var(--sp-text-muted);
    line-height: 1.7;
    margin: 0;
  }

  .features-cta {
    padding: 4rem 2rem 5rem;
    text-align: center;
    position: relative;
    z-index: 1;
  }

  .features-cta-container {
    max-width: 500px;
    margin: 0 auto;
  }

  .features-cta-title {
    font-family: var(--sp-font-display);
    font-size: clamp(1.8rem, 4vw, 2.5rem);
    font-weight: 800;
    margin: 0 0 1rem;
    letter-spacing: -0.02em;
  }

  .features-cta-desc {
    font-size: 1rem;
    color: var(--sp-text-muted);
    margin: 0 0 2rem;
    line-height: 1.6;
  }

  @media (max-width: 640px) {
    .feature-row,
    .feature-row-reverse {
      flex-direction: column;
      text-align: center;
    }

    .feature-icon-box {
      width: 100px;
      height: 100px;
    }
  }
</style>
